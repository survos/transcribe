{% extends 'base.html.twig' %}

{% block title %}Projects{% endblock %}

{% block breadcrumbs %}
{{ parent() }}
    <li><a href="{{ path('project_show', project.rp) }}">{{ project.code }}</a></li>
{% endblock %}


{% block content  %}

    {% import "media/show.html.twig" as macro %}

    <div id="navbar" class="audio_transcriber">

        Soundbite player
        {{ macro.audio_player(false) }}
    </div>

    <div id="content" class="main example-wrapper">
    <h1>Project {{ project.code }}</h1>

    <div class="row">
        <div class="col-md-5">

            {{ macro.listMarkers(markers) }}
        </div>
        <div class="col-md-7">

            {{ block('transcripts') }}



        </div>
    </div>


</div>
{% endblock %}

    {% block transcripts %}
        {% import "media/show.html.twig" as macro %}
<table class="table table-bordered">
    <thead>
    <tr>
        <th></th>
        <th>File</th>
        <th>#</th>
        <th>Words</th>
    </tr>
    </thead>
    <tbody>
    {% for m in project.media %}
        <tr>
            <td><a href="{{ path('easyadmin', {entity: 'Media', action: 'edit', id: m.id}) }}">
                    <i class="fa fa-pencil"></i>
                </a></td>
            <td>
                <a href="{{ path('media_show', m.rp) }}">{{ m.filename }}</a></td>
            <td class="right">{{ m.words.count }}</td>
            <td>

                {{ macro.mediaWords(m) }}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}

{% block javascripts %}
{{ parent() }}
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

<script>
    $( function() {
        $('#order').text("start");
        console.log("Sortable!");
        $( ".sortable" ).sortable({
            update: function( event, ui ) {
                var data = $(this).sortable('serialize');
                console.log('data', data);
                $('#marker_order').text('order: ' + data);
                $.ajax({
                    data: data,
                    type: 'GET',
                    url: '{{ path('marker_reorder', project.rp) }}'
                });
            }
        });
        $( ".sortable" ).disableSelection();
    } );
    </script>

{% endblock  %}
